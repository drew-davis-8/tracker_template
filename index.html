<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Daily Task Log — Plus</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0f1220; --panel:#151a2b; --muted:#8b90a5; --text:#e8ebf7;
    --accent:#6aa9ff; --accent-2:#8ef0c6; --danger:#ff6b6b; --ok:#74d680;
    --chip:#1e2540; --border:#2a3252; --ink:#0a1020;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    background:linear-gradient(180deg,#0b0e1a, #0f1220 30%, #0f1220);
    color:var(--text);
  }
  .wrap{max-width:1100px; margin:24px auto; padding:0 16px 80px}
  header{display:flex; gap:16px; align-items:center; margin-bottom:16px; justify-content:space-between}
  h1{font-size:22px; margin:0}
  .badge{padding:4px 10px; border:1px solid var(--border); border-radius:999px; color:var(--muted)}
  .panel{background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:16px}
  .toolbar{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
  label{font-size:12px; color:var(--muted)}
  input[type="date"], .text, .num, .btn, .file, select{
    background:#0d1120; border:1px solid var(--border); color:var(--text);
    border-radius:10px; padding:10px 12px; outline:none; font:inherit;
  }
  .text::placeholder{color:#667}
  .btn{cursor:pointer; border:1px solid var(--border)}
  .btn.primary{background:var(--accent); border:none; color:var(--ink); font-weight:600}
  .btn.ghost{background:transparent}
  .btn.danger{background:transparent; border-color:#3a2a2a; color:#ffb1b1}
  .btn.ok{background:var(--ok); border:none; color:#05220f; font-weight:600}
  .btn:disabled{opacity:.6; cursor:not-allowed}
  form.add{display:grid; grid-template-columns:2fr 1fr 100px 1fr 140px; gap:10px; margin-top:12px}
  @media (max-width:980px){ form.add{grid-template-columns:1fr 1fr 100px 1fr; } .notes-col{grid-column:1/-2} }
  @media (max-width:680px){ form.add{grid-template-columns:1fr; } }
  ul{list-style:none; margin:0; padding:0}
  .task{display:flex; align-items:center; gap:10px; padding:12px; border-bottom:1px solid var(--border)}
  .task:last-child{border-bottom:none}
  .task .title{flex:1; min-width:120px; line-height:1.3}
  .task .title[contenteditable="true"]{outline:none; border-bottom:1px dashed transparent}
  .task .title:focus{border-bottom-color:var(--accent)}
  .tags{display:flex; gap:6px; flex-wrap:wrap}
  .tag{background:var(--chip); color:#b9c3ff; border:1px solid var(--border); padding:2px 8px; border-radius:999px; font-size:12px; cursor:pointer}
  .right{display:flex; gap:8px; align-items:center}
  .mins{min-width:52px; text-align:right; font-variant-numeric:tabular-nums}
  .stats{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px; color:var(--muted)}
  .stat{padding:6px 10px; border:1px solid var(--border); border-radius:999px; white-space:nowrap}
  .muted{color:var(--muted)}
  .strike{text-decoration:line-through; color:#9aa0b8}
  .small{font-size:12px}

  .grid{display:grid; grid-template-columns:1.2fr 1fr; gap:16px}
  @media (max-width:980px){ .grid{grid-template-columns:1fr} }

  .viz{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media (max-width:680px){ .viz{grid-template-columns:1fr} }

  .canvas{width:100%; height:220px; background:#0c1122; border:1px solid var(--border); border-radius:12px}

  .donut{
    --fill: conic-gradient(#6aa9ff 0deg, #6aa9ff 0deg);
    width:220px; height:220px; border-radius:999px; background:var(--fill);
    display:grid; place-items:center; margin:auto;
    border:1px solid var(--border);
  }
  .donut::after{
    content:""; width:120px; height:120px; border-radius:999px; background:#0c1122; border:1px solid var(--border);
  }
  .legend{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:8px}
  .legend .chip{display:flex; align-items:center; gap:6px; padding:4px 8px; border:1px solid var(--border); border-radius:999px}
  .legend .swatch{width:10px; height:10px; border-radius:3px; background:#6aa9ff}

  .heatmap{display:grid; grid-template-columns:repeat(15, 1fr); gap:4px}
  .cell{width:100%; padding-bottom:100%; border-radius:6px; border:1px solid var(--border); position:relative}
  .cell::after{content:attr(data-d); position:absolute; inset:0; font-size:10px; color:#889; display:grid; place-items:center; opacity:.4}
  .l0{background:#0c1122}
  .l1{background:#152a5a}
  .l2{background:#1b3977}
  .l3{background:#2156b0}
  .l4{background:#2872e3}
  .l5{background:#3b8dff}
  .topbar{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .spacer{flex:1}
  .selectTask{min-width:180px}
  .mono{font-variant-numeric:tabular-nums}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="display:flex; align-items:center; gap:12px">
        <h1>Daily Task Log</h1>
        <span class="badge small">Plus • Local • Offline-first</span>
      </div>
      <div class="topbar">
        <select id="currentTask" class="selectTask"></select>
        <button id="startPom" class="btn ok">▶ Pomodoro (25:00)</button>
        <button id="stopPom" class="btn ghost" disabled>■ Stop</button>
        <span id="pomLeft" class="small mono muted">idle</span>
      </div>
    </header>

    <!-- Controls -->
    <div class="panel">
      <div class="toolbar">
        <div>
          <label for="day">Day</label><br />
          <input type="date" id="day" />
        </d
